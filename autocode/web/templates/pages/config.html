{% extends "base.html" %}

{% block title %}Configuration{% endblock %}

{% block content %}
<div class="config-container">
    <div class="config-header">
        <h1>Autocode Configuration</h1>
        <p>Configure all aspects of the autocode monitoring system</p>
    </div>

    <div class="config-actions">
        <button id="save-config" class="btn btn-primary">Save Configuration</button>
        <button id="reset-config" class="btn btn-secondary">Reset to Defaults</button>
        <span id="save-status" class="save-status"></span>
    </div>

    <form id="config-form">
        <!-- Daemon Configuration -->
        <fieldset class="config-section">
            <legend>Daemon Settings</legend>
            
            <div class="config-group">
                <h3>Check Configuration</h3>
                
                <div class="config-row">
                    <div class="config-item">
                        <label for="daemon.doc_check.enabled">
                            <input type="checkbox" id="daemon.doc_check.enabled" name="daemon.doc_check.enabled">
                            Documentation Check Enabled
                        </label>
                    </div>
                    <div class="config-item">
                        <label for="daemon.doc_check.interval_minutes">Interval (minutes):</label>
                        <input type="number" id="daemon.doc_check.interval_minutes" name="daemon.doc_check.interval_minutes" min="1" max="1440">
                    </div>
                </div>

                <div class="config-row">
                    <div class="config-item">
                        <label for="daemon.git_check.enabled">
                            <input type="checkbox" id="daemon.git_check.enabled" name="daemon.git_check.enabled">
                            Git Check Enabled
                        </label>
                    </div>
                    <div class="config-item">
                        <label for="daemon.git_check.interval_minutes">Interval (minutes):</label>
                        <input type="number" id="daemon.git_check.interval_minutes" name="daemon.git_check.interval_minutes" min="1" max="1440">
                    </div>
                </div>

                <div class="config-row">
                    <div class="config-item">
                        <label for="daemon.test_check.enabled">
                            <input type="checkbox" id="daemon.test_check.enabled" name="daemon.test_check.enabled">
                            Test Check Enabled
                        </label>
                    </div>
                    <div class="config-item">
                        <label for="daemon.test_check.interval_minutes">Interval (minutes):</label>
                        <input type="number" id="daemon.test_check.interval_minutes" name="daemon.test_check.interval_minutes" min="1" max="1440">
                    </div>
                </div>
            </div>

            <div class="config-group">
                <h3>Token Alerts</h3>
                
                <div class="config-row">
                    <div class="config-item">
                        <label for="daemon.token_alerts.enabled">
                            <input type="checkbox" id="daemon.token_alerts.enabled" name="daemon.token_alerts.enabled">
                            Token Alerts Enabled
                        </label>
                    </div>
                    <div class="config-item">
                        <label for="daemon.token_alerts.threshold">Threshold:</label>
                        <input type="number" id="daemon.token_alerts.threshold" name="daemon.token_alerts.threshold" min="1000" max="1000000">
                    </div>
                    <div class="config-item">
                        <label for="daemon.token_alerts.model">Model:</label>
                        <select id="daemon.token_alerts.model" name="daemon.token_alerts.model">
                            <option value="gpt-4">GPT-4</option>
                            <option value="gpt-3.5-turbo">GPT-3.5 Turbo</option>
                            <option value="claude-3-opus">Claude 3 Opus</option>
                            <option value="claude-3-sonnet">Claude 3 Sonnet</option>
                        </select>
                    </div>
                </div>
            </div>
        </fieldset>

        <!-- API Configuration -->
        <fieldset class="config-section">
            <legend>API Settings</legend>
            
            <div class="config-row">
                <div class="config-item">
                    <label for="api.host">Host:</label>
                    <input type="text" id="api.host" name="api.host" placeholder="127.0.0.1">
                </div>
                <div class="config-item">
                    <label for="api.port">Port:</label>
                    <input type="number" id="api.port" name="api.port" min="1" max="65535">
                </div>
            </div>
        </fieldset>

        <!-- OpenCode Configuration -->
        <fieldset class="config-section">
            <legend>OpenCode Settings</legend>
            
            <div class="config-row">
                <div class="config-item">
                    <label for="opencode.enabled">
                        <input type="checkbox" id="opencode.enabled" name="opencode.enabled">
                        OpenCode Enabled
                    </label>
                </div>
                <div class="config-item">
                    <label for="opencode.model">Model:</label>
                    <input type="text" id="opencode.model" name="opencode.model" placeholder="claude-4-sonnet">
                </div>
                <div class="config-item">
                    <label for="opencode.max_tokens">Max Tokens:</label>
                    <input type="number" id="opencode.max_tokens" name="opencode.max_tokens" min="1000" max="200000">
                </div>
            </div>

            <div class="config-row">
                <div class="config-item">
                    <label for="opencode.debug">
                        <input type="checkbox" id="opencode.debug" name="opencode.debug">
                        Debug Mode
                    </label>
                </div>
                <div class="config-item">
                    <label for="opencode.quiet_mode">
                        <input type="checkbox" id="opencode.quiet_mode" name="opencode.quiet_mode">
                        Quiet Mode
                    </label>
                </div>
                <div class="config-item">
                    <label for="opencode.json_output">
                        <input type="checkbox" id="opencode.json_output" name="opencode.json_output">
                        JSON Output
                    </label>
                </div>
            </div>

            <div class="config-row">
                <div class="config-item">
                    <label for="opencode.config_path">Config Path:</label>
                    <input type="text" id="opencode.config_path" name="opencode.config_path" placeholder=".opencode.json">
                </div>
            </div>
        </fieldset>

        <!-- Documentation Index Configuration -->
        <fieldset class="config-section">
            <legend>Documentation Index Settings</legend>
            
            <div class="config-row">
                <div class="config-item">
                    <label for="doc_index.enabled">
                        <input type="checkbox" id="doc_index.enabled" name="doc_index.enabled">
                        Doc Index Enabled
                    </label>
                </div>
                <div class="config-item">
                    <label for="doc_index.auto_generate">
                        <input type="checkbox" id="doc_index.auto_generate" name="doc_index.auto_generate">
                        Auto Generate
                    </label>
                </div>
                <div class="config-item">
                    <label for="doc_index.update_on_docs_change">
                        <input type="checkbox" id="doc_index.update_on_docs_change" name="doc_index.update_on_docs_change">
                        Update on Docs Change
                    </label>
                </div>
            </div>

            <div class="config-row">
                <div class="config-item">
                    <label for="doc_index.output_path">Output Path:</label>
                    <input type="text" id="doc_index.output_path" name="doc_index.output_path" placeholder=".clinerules/docs_index.json">
                </div>
            </div>
        </fieldset>

        <!-- Documentation Settings -->
        <fieldset class="config-section">
            <legend>Documentation Settings</legend>
            
            <div class="config-row">
                <div class="config-item">
                    <label for="docs.enabled">
                        <input type="checkbox" id="docs.enabled" name="docs.enabled">
                        Documentation Checking Enabled
                    </label>
                </div>
            </div>

            <div class="config-row">
                <div class="config-item">
                    <label for="docs.directories">Directories (one per line):</label>
                    <textarea id="docs.directories" name="docs.directories" rows="3" placeholder="autocode/\nexamples/"></textarea>
                </div>
                <div class="config-item">
                    <label for="docs.file_extensions">File Extensions (one per line):</label>
                    <textarea id="docs.file_extensions" name="docs.file_extensions" rows="4" placeholder=".py\n.js\n.html\n.css"></textarea>
                </div>
                <div class="config-item">
                    <label for="docs.exclude">Exclude Patterns (one per line):</label>
                    <textarea id="docs.exclude" name="docs.exclude" rows="3" placeholder="__pycache__/\n*.pyc\n__init__.py"></textarea>
                </div>
            </div>
        </fieldset>

        <!-- Test Settings -->
        <fieldset class="config-section">
            <legend>Test Settings</legend>
            
            <div class="config-row">
                <div class="config-item">
                    <label for="tests.enabled">
                        <input type="checkbox" id="tests.enabled" name="tests.enabled">
                        Test Checking Enabled
                    </label>
                </div>
                <div class="config-item">
                    <label for="tests.auto_execute">
                        <input type="checkbox" id="tests.auto_execute" name="tests.auto_execute">
                        Auto Execute Tests
                    </label>
                </div>
            </div>

            <div class="config-row">
                <div class="config-item">
                    <label for="tests.directories">Test Directories (one per line):</label>
                    <textarea id="tests.directories" name="tests.directories" rows="3" placeholder="tests/\nautocode/"></textarea>
                </div>
                <div class="config-item">
                    <label for="tests.exclude">Exclude Patterns (one per line):</label>
                    <textarea id="tests.exclude" name="tests.exclude" rows="3" placeholder="__pycache__/\n*.pyc\n__init__.py"></textarea>
                </div>
                <div class="config-item">
                    <label for="tests.test_frameworks">Test Frameworks (one per line):</label>
                    <textarea id="tests.test_frameworks" name="tests.test_frameworks" rows="2" placeholder="pytest\nunittest"></textarea>
                </div>
            </div>
        </fieldset>

        <!-- Code to Design Settings -->
        <fieldset class="config-section">
            <legend>Code to Design Settings</legend>
            
            <div class="config-row">
                <div class="config-item">
                    <label for="code_to_design.enabled">
                        <input type="checkbox" id="code_to_design.enabled" name="code_to_design.enabled">
                        Code to Design Enabled
                    </label>
                </div>
                <div class="config-item">
                    <label for="code_to_design.output_dir">Output Directory:</label>
                    <input type="text" id="code_to_design.output_dir" name="code_to_design.output_dir" placeholder="design">
                </div>
            </div>

            <div class="config-row">
                <div class="config-item">
                    <label for="code_to_design.languages">Languages (one per line):</label>
                    <textarea id="code_to_design.languages" name="code_to_design.languages" rows="4" placeholder="python\njavascript\nhtml\ncss"></textarea>
                </div>
                <div class="config-item">
                    <label for="code_to_design.diagrams">Diagrams (one per line):</label>
                    <textarea id="code_to_design.diagrams" name="code_to_design.diagrams" rows="2" placeholder="classes\ncomponents"></textarea>
                </div>
                <div class="config-item">
                    <label for="code_to_design.directories">Directories (one per line):</label>
                    <textarea id="code_to_design.directories" name="code_to_design.directories" rows="3" placeholder="autocode/\nsrc/"></textarea>
                </div>
            </div>
        </fieldset>
    </form>
</div>
{% endblock %}
